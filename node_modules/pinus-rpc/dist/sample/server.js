"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require('source-map-support/register');
const preload_1 = require("./preload");
preload_1.preload();
const index_1 = require("../index");
const pinus_logger_1 = require("pinus-logger");
const pinus_logger_2 = require("pinus-logger");
pinus_logger_1.configure('./config/log4js.json');
let logger = pinus_logger_2.getLogger('pinus-rpc', 'sample-server');
// remote service path info list
let paths = [
    {
        serverType: 'test',
        namespace: 'user', path: __dirname + '/remote/test'
    }
];
function runServer(port) {
    let server = index_1.createServer({ paths: paths, port: port, rpcDebugLog: true,
        rpcLogger: logger,
        acceptorFactory: index_1.createTcpAcceptor
    });
    server.start();
    console.log('rpc server started.' + port);
}
runServer(3333);
runServer(3334);
setTimeout(() => runServer(3335), 5000);
process.on('uncaughtException', function (err) {
    console.error(err);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VydmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc2FtcGxlL3NlcnZlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO0FBQ3ZDLHVDQUFrQztBQUNsQyxpQkFBTyxFQUFFLENBQUM7QUFDVixvQ0FBeUQ7QUFDekQsK0NBQXlDO0FBQ3pDLCtDQUF1QztBQUN2Qyx3QkFBUyxDQUFDLHNCQUFzQixDQUFDLENBQUM7QUFDbEMsSUFBSSxNQUFNLEdBQUcsd0JBQVMsQ0FBQyxXQUFXLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFFckQsZ0NBQWdDO0FBQ2hDLElBQUksS0FBSyxHQUFHO0lBQ1Y7UUFDRSxVQUFVLEVBQUUsTUFBTTtRQUNsQixTQUFTLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxTQUFTLEdBQUcsY0FBYztLQUFDO0NBQ3ZELENBQUM7QUFJRixtQkFBbUIsSUFBWTtJQUUzQixJQUFJLE1BQU0sR0FBRyxvQkFBWSxDQUFDLEVBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxJQUFJO1FBQ2xFLFNBQVMsRUFBRSxNQUFNO1FBQ2pCLGVBQWUsRUFBRSx5QkFBaUI7S0FDckMsQ0FBQyxDQUFDO0lBQ0gsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ2YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLENBQUMsQ0FBQztBQUM5QyxDQUFDO0FBSUQsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2hCLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNoQixVQUFVLENBQUMsR0FBRyxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBR3hDLE9BQU8sQ0FBQyxFQUFFLENBQUMsbUJBQW1CLEVBQUUsVUFBUyxHQUFHO0lBQ3hDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDdkIsQ0FBQyxDQUFDLENBQUMifQ==